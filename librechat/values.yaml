global:
  librechat:
    existingSecretName: "librechat-credentials"

librechat:
  configEnv:
    DOMAIN_CLIENT: "https://librechat.k.shion1305.com"
    DOMAIN_SERVER: "https://librechat.k.shion1305.com"
    ALLOW_REGISTRATION: "false"
    ALLOW_SOCIAL_REGISTRATION: "false"
    ALLOW_EMAIL_LOGIN: "true"

  configYamlContent: |
    version: 1.2.1

    cache: true

    mcpSettings:
      allowedDomains:
        - "postgres-mcp.atc.svc.cluster.local"

    mcpServers:
      postgres:
        type: sse
        url: "http://postgres-mcp.atc.svc.cluster.local:8000/sse"
        timeout: 60000

# Disable chart-managed ingress; we manage our own
ingress:
  enabled: false

# MongoDB bundled dependency
mongodb:
  enabled: true
  image:
    registry: docker.io
    repository: bitnamilegacy/mongodb
    tag: 8.0.13-debian-12-r0
  auth:
    enabled: true
    usernames:
      - shion1305
    databases:
      - LibreChat
    existingSecret: librechat-credentials
  persistence:
    storageClass: "longhorn-hdd"
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: kubernetes.io/hostname
                operator: In
                values:
                  - shion-ubuntu-2505

# Meilisearch bundled dependency
meilisearch:
  enabled: true
  auth:
    existingMasterKeySecret: "librechat-credentials"
  persistence:
    enabled: true
    storageClass: "longhorn-hdd"

resources:
  requests:
    cpu: "200m"
    memory: "512Mi"
  limits:
    cpu: "1000m"
    memory: "1Gi"
